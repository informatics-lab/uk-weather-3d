<!doctype html>
<html ng-app="viewer">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>3D viewer</title>

    <script src="angularjs/1.3.5/angular.min.js"></script>
    <!-- script src="//angular-ui.github.io/bootstrap/ui-bootstrap-tpls-0.12.0.min.js"></script -->

    <script src="extras/xmlToJSON.js"> </script>
    <script src="extras/three.min.js"> </script>
    <script src="extras/controls/TrackballControls.js"></script>
    <script src="extras/libs/stats.min.js"></script>
    <link href="view3d.css" rel="stylesheet">
    <!-- link href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css" rel="stylesheet" -->
    <script src="water-material.js"></script>
    <script src="extras/latlon.js"></script>
    <script src="view3d.js"></script>
  </head>
  <body ng-app="viewer">
   <div ng-controller="MainController">
    <!-- <div ng-style="overlayStyle" class="overlay"></div> -->
    <div ng-style="modalStyle" class="modal" ng-mouseenter="controlsActive(false)" ng-mouseleave="controlsActive(true)">
      <div id="info">
        <button ng-click="getCameraPosition()">position</button>
        <button ng-click="rebuildWx()">reload wx</button><br>
	<select ng-model="bboxChoice" ng-options="key for (key,value) in bboxes">
          <option value="">-- choose bbox --</option>
	</select>
	<br>
	Colour 0 <input type="text" ng-model="paletteColour0"></input><br>
	Colour 1 <input type="text" ng-model="paletteColour1"></input><br>
	Shininess <input type="text" ng-model="shininess"></input><br>
        <pre> {{position}} </pre>
        <pre> {{distns}} </pre>
        <pre> {{distew}} </pre>
        <form name="hh">
        X <input type="text" ng-model="light_x"></input><br>
        Y <input type="text" ng-model="light_y"></input><br>
        Z <input type="text" ng-model="light_z"></input><br>
        Wx mult <input type="text" ng-model="wx_mult"></input><br>
        Wx  add <input type="text" ng-model="wx_add"></input><br>
        </form>
        <ul><li ng-repeat="(key, value) in coverage">{{key}} : {{value}}</li></ul>
      </div>
    </div><!-- modal -->
    <div class="content">
      <div id="webgl"></div>
    </div>
  </div><!-- MainController -->
  <script>

  document.getElementById('webgl').appendChild(VIEW3D.renderer.domElement);
  var stats = new Stats();
  document.getElementById('info').appendChild( stats.domElement );
  window.addEventListener( 'resize', function(){
    VIEW3D.resize(window.innerWidth, window.innerHeight)}, false );

  mainLoop();

  </script>
  </body>
</html>
